var ctx="_ctx.",ctxloop=ctx+"loop";exports.compile=function(e,t,n,r,i,s){var o=t.shift(),u="__k",a=(ctx+"__loopcache"+Math.random()).replace(/\./g,""),f;return t[0]&&t[0]===","&&(t.shift(),u=o,o=t.shift()),f=t.join(""),["(function () {\n","  var __l = "+f+', __len = (_utils.isArray(__l) || typeof __l === "string") ? __l.length : _utils.keys(__l).length;\n',"  if (!__l) { return; }\n","    var "+a+" = { loop: "+ctxloop+", "+o+": "+ctx+o+", "+u+": "+ctx+u+" };\n","    "+ctxloop+" = { first: false, index: 1, index0: 0, revindex: __len, revindex0: __len - 1, length: __len, last: false };\n","  _utils.each(__l, function ("+o+", "+u+") {\n","    "+ctx+o+" = "+o+";\n","    "+ctx+u+" = "+u+";\n","    "+ctxloop+".key = "+u+";\n","    "+ctxloop+".first = ("+ctxloop+".index0 === 0);\n","    "+ctxloop+".last = ("+ctxloop+".revindex0 === 0);\n","    "+e(n,r,i,s),"    "+ctxloop+".index += 1; "+ctxloop+".index0 += 1; "+ctxloop+".revindex -= 1; "+ctxloop+".revindex0 -= 1;\n","  });\n","  "+ctxloop+" = "+a+".loop;\n","  "+ctx+o+" = "+a+"."+o+";\n","  "+ctx+u+" = "+a+"."+u+";\n","  "+a+" = undefined;\n","})();\n"].join("")},exports.parse=function(e,t,n,r){var i,s;return n.on(r.NUMBER,function(e){var n=this.state.length?this.state[this.state.length-1]:null;if(!s||n!==r.ARRAYOPEN&&n!==r.CURLYOPEN&&n!==r.CURLYCLOSE&&n!==r.FUNCTION&&n!==r.FILTER)throw new Error('Unexpected number "'+e.match+'" on line '+t+".");return!0}),n.on(r.VAR,function(e){if(s&&i)return!0;this.out.length||(i=!0),this.out.push(e.match)}),n.on(r.COMMA,function(e){if(i&&this.prevToken.type===r.VAR){this.out.push(e.match);return}return!0}),n.on(r.COMPARATOR,function(e){if(e.match!=="in"||!i)throw new Error('Unexpected token "'+e.match+'" on line '+t+".");s=!0,this.filterApplyIdx.push(this.out.length)}),!0},exports.ends=!0;