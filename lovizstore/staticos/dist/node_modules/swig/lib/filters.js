function iterateFilter(e){var t=this,n={};if(utils.isArray(e))return utils.map(e,function(e){return t.apply(null,arguments)});if(typeof e=="object")return utils.each(e,function(e,r){n[r]=t.apply(null,arguments)}),n;return}var utils=require("./utils"),dateFormatter=require("./dateformatter");exports.addslashes=function(e){var t=iterateFilter.apply(exports.addslashes,arguments);return t!==undefined?t:e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"')},exports.capitalize=function(e){var t=iterateFilter.apply(exports.capitalize,arguments);return t!==undefined?t:e.toString().charAt(0).toUpperCase()+e.toString().substr(1).toLowerCase()},exports.date=function(e,t,n,r){var i=t.length,s=new dateFormatter.DateZ(e),o,u=0,a="";n&&s.setTimezoneOffset(n,r);for(u;u<i;u+=1)o=t.charAt(u),o==="\\"?(u+=1,a+=u<i?t.charAt(u):o):dateFormatter.hasOwnProperty(o)?a+=dateFormatter[o](s,n,r):a+=o;return a},exports["default"]=function(e,t){return typeof e=="undefined"||!e&&typeof e!="number"?t:e},exports.escape=function(e,t){var n=iterateFilter.apply(exports.escape,arguments),r=e,i=0,s;if(n!==undefined)return n;if(typeof e!="string")return e;n="";switch(t){case"js":r=r.replace(/\\/g,"\\u005C");for(i;i<r.length;i+=1)s=r.charCodeAt(i),s<32?(s=s.toString(16).toUpperCase(),s=s.length<2?"0"+s:s,n+="\\u00"+s):n+=r[i];return n.replace(/&/g,"\\u0026").replace(/</g,"\\u003C").replace(/>/g,"\\u003E").replace(/\'/g,"\\u0027").replace(/"/g,"\\u0022").replace(/\=/g,"\\u003D").replace(/-/g,"\\u002D").replace(/;/g,"\\u003B");default:return r.replace(/&(?!amp;|lt;|gt;|quot;|#39;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},exports.e=exports.escape,exports.first=function(e){if(typeof e=="object"&&!utils.isArray(e)){var t=utils.keys(e);return e[t[0]]}return typeof e=="string"?e.substr(0,1):e[0]},exports.groupBy=function(e,t){if(!utils.isArray(e))return e;var n={};return utils.each(e,function(e){if(!e.hasOwnProperty(t))return;var r=e[t],i=utils.extend({},e);delete e[t],n[r]||(n[r]=[]),n[r].push(e)}),n},exports.join=function(e,t){if(utils.isArray(e))return e.join(t);if(typeof e=="object"){var n=[];return utils.each(e,function(e){n.push(e)}),n.join(t)}return e},exports.json=function(e,t){return JSON.stringify(e,null,t||0)},exports.json_encode=exports.json,exports.last=function(e){if(typeof e=="object"&&!utils.isArray(e)){var t=utils.keys(e);return e[t[t.length-1]]}return typeof e=="string"?e.charAt(e.length-1):e[e.length-1]},exports.lower=function(e){var t=iterateFilter.apply(exports.lower,arguments);return t!==undefined?t:e.toString().toLowerCase()},exports.raw=function(e){return exports.safe(e)},exports.raw.safe=!0,exports.replace=function(e,t,n,r){var i=new RegExp(t,r);return e.replace(i,n)},exports.reverse=function(e){return exports.sort(e,!0)},exports.safe=function(e){return e},exports.safe.safe=!0,exports.sort=function(e,t){var n;if(utils.isArray(e))n=e.sort();else switch(typeof e){case"object":n=utils.keys(e).sort();break;case"string":n=e.split("");if(t)return n.reverse().join("");return n.sort().join("")}return n&&t?n.reverse():n||e},exports.striptags=function(e){var t=iterateFilter.apply(exports.striptags,arguments);return t!==undefined?t:e.toString().replace(/(<([^>]+)>)/ig,"")},exports.title=function(e){var t=iterateFilter.apply(exports.title,arguments);return t!==undefined?t:e.toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},exports.uniq=function(e){var t;return!e||!utils.isArray(e)?"":(t=[],utils.each(e,function(e){t.indexOf(e)===-1&&t.push(e)}),t)},exports.upper=function(e){var t=iterateFilter.apply(exports.upper,arguments);return t!==undefined?t:e.toString().toUpperCase()},exports.url_encode=function(e){var t=iterateFilter.apply(exports.url_encode,arguments);return t!==undefined?t:encodeURIComponent(e)},exports.url_decode=function(e){var t=iterateFilter.apply(exports.url_decode,arguments);return t!==undefined?t:decodeURIComponent(e)};