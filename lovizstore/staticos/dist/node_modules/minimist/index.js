function hasKey(e,t){var n=e;t.slice(0,-1).forEach(function(e){n=n[e]||{}});var r=t[t.length-1];return r in n}function setKey(e,t,n){var r=e;t.slice(0,-1).forEach(function(e){r[e]===undefined&&(r[e]={}),r=r[e]});var i=t[t.length-1];r[i]===undefined||typeof r[i]=="boolean"?r[i]=n:Array.isArray(r[i])?r[i].push(n):r[i]=[r[i],n]}function isNumber(e){return typeof e=="number"?!0:/^0x[0-9a-f]+$/i.test(e)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)}module.exports=function(e,t){function u(e,t){var i=!n.strings[e]&&isNumber(t)?Number(t):t;setKey(s,e.split("."),i),(r[e]||[]).forEach(function(e){setKey(s,e.split("."),i)})}t||(t={});var n={bools:{},strings:{}};[].concat(t["boolean"]).filter(Boolean).forEach(function(e){n.bools[e]=!0});var r={};Object.keys(t.alias||{}).forEach(function(e){r[e]=[].concat(t.alias[e]),r[e].forEach(function(t){r[t]=[e].concat(r[e].filter(function(e){return t!==e}))})}),[].concat(t.string).filter(Boolean).forEach(function(e){n.strings[e]=!0,r[e]&&(n.strings[r[e]]=!0)});var i=t["default"]||{},s={_:[]};Object.keys(n.bools).forEach(function(e){u(e,i[e]===undefined?!1:i[e])});var o=[];e.indexOf("--")!==-1&&(o=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var a=0;a<e.length;a++){var f=e[a];if(/^--.+=/.test(f)){var l=f.match(/^--([^=]+)=([\s\S]*)$/);u(l[1],l[2])}else if(/^--no-.+/.test(f)){var c=f.match(/^--no-(.+)/)[1];u(c,!1)}else if(/^--.+/.test(f)){var c=f.match(/^--(.+)/)[1],h=e[a+1];h!==undefined&&!/^-/.test(h)&&!n.bools[c]&&(r[c]?!n.bools[r[c]]:!0)?(u(c,h),a++):/^(true|false)$/.test(h)?(u(c,h==="true"),a++):u(c,n.strings[c]?"":!0)}else if(/^-[^-]+/.test(f)){var p=f.slice(1,-1).split(""),d=!1;for(var v=0;v<p.length;v++){var h=f.slice(v+2);if(h==="-"){u(p[v],h);continue}if(/[A-Za-z]/.test(p[v])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(h)){u(p[v],h),d=!0;break}if(p[v+1]&&p[v+1].match(/\W/)){u(p[v],f.slice(v+2)),d=!0;break}u(p[v],n.strings[p[v]]?"":!0)}var c=f.slice(-1)[0];!d&&c!=="-"&&(e[a+1]&&!/^(-|--)[^-]/.test(e[a+1])&&!n.bools[c]&&(r[c]?!n.bools[r[c]]:!0)?(u(c,e[a+1]),a++):e[a+1]&&/true|false/.test(e[a+1])?(u(c,e[a+1]==="true"),a++):u(c,n.strings[c]?"":!0))}else s._.push(n.strings._||!isNumber(f)?f:Number(f))}return Object.keys(i).forEach(function(e){hasKey(s,e.split("."))||(setKey(s,e.split("."),i[e]),(r[e]||[]).forEach(function(t){setKey(s,t.split("."),i[e])}))}),o.forEach(function(e){s._.push(e)}),s};