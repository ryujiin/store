function load_global(e){e=path.resolve(path.dirname(module.filename),e);try{var t=fs.readFileSync(e,"utf8");return vm.runInContext(t,UglifyJS,e)}catch(n){console.log("ERROR in file: "+e+" / "+n),process.exit(1)}}function readReservedFile(e,t){t||(t={vars:[],props:[]});var n=fs.readFileSync(e,"utf8");return n=JSON.parse(n),n.vars&&n.vars.forEach(function(e){UglifyJS.push_uniq(t.vars,e)}),n.props&&n.props.forEach(function(e){UglifyJS.push_uniq(t.props,e)}),t}var path=require("path"),fs=require("fs"),vm=require("vm"),UglifyJS=vm.createContext({console:console,process:process,Buffer:Buffer,MOZ_SourceMap:require("source-map")}),FILES=exports.FILES=["../lib/utils.js","../lib/ast.js","../lib/parse.js","../lib/transform.js","../lib/scope.js","../lib/output.js","../lib/compress.js","../lib/sourcemap.js","../lib/mozilla-ast.js","../lib/propmangle.js"].map(function(e){return fs.realpathSync(path.join(path.dirname(__filename),e))});FILES.forEach(load_global),UglifyJS.AST_Node.warn_function=function(e){console.error("WARN: %s",e)};for(var i in UglifyJS)UglifyJS.hasOwnProperty(i)&&(exports[i]=UglifyJS[i]);exports.minify=function(e,t){t=UglifyJS.defaults(t,{spidermonkey:!1,outSourceMap:null,sourceRoot:null,inSourceMap:null,fromString:!1,warnings:!1,mangle:{},output:null,compress:{}}),UglifyJS.base54.reset();var n=null,r={};t.spidermonkey?n=UglifyJS.AST_Node.from_mozilla_ast(e):(typeof e=="string"&&(e=[e]),e.forEach(function(e){var i=t.fromString?e:fs.readFileSync(e,"utf8");r[e]=i,n=UglifyJS.parse(i,{filename:t.fromString?"?":e,toplevel:n})}));if(t.compress){var i={warnings:t.warnings};UglifyJS.merge(i,t.compress),n.figure_out_scope();var s=UglifyJS.Compressor(i);n=n.transform(s)}t.mangle&&(n.figure_out_scope(t.mangle),n.compute_char_frequency(t.mangle),n.mangle_names(t.mangle));var o=t.inSourceMap,u={};typeof t.inSourceMap=="string"&&(o=fs.readFileSync(t.inSourceMap,"utf8"));if(t.outSourceMap){u.source_map=UglifyJS.SourceMap({file:t.outSourceMap,orig:o,root:t.sourceRoot});if(t.sourceMapIncludeSources)for(var a in r)r.hasOwnProperty(a)&&u.source_map.get().setSourceContent(a,r[a])}t.output&&UglifyJS.merge(u,t.output);var f=UglifyJS.OutputStream(u);n.print(f),t.outSourceMap&&(f+="\n//# sourceMappingURL="+t.outSourceMap);var l=u.source_map;return l&&(l+=""),{code:f+"",map:l}},exports.describe_ast=function(){function t(n){e.print("AST_"+n.TYPE);var r=n.SELF_PROPS.filter(function(e){return!/^\$/.test(e)});r.length>0&&(e.space(),e.with_parens(function(){r.forEach(function(t,n){n&&e.space(),e.print(t)})})),n.documentation&&(e.space(),e.print_string(n.documentation)),n.SUBCLASSES.length>0&&(e.space(),e.with_block(function(){n.SUBCLASSES.forEach(function(n,r){e.indent(),t(n),e.newline()})}))}var e=UglifyJS.OutputStream({beautify:!0});return t(UglifyJS.AST_Node),e+""},exports.readReservedFile=readReservedFile,exports.readDefaultReservedFile=function(e){return readReservedFile(path.join(__dirname,"domprops.json"),e)},exports.readNameCache=function(e,t){var n=null;if(e)try{var n=fs.readFileSync(e,"utf8");n=JSON.parse(n)[t];if(!n)throw"init";n.props=UglifyJS.Dictionary.fromObject(n.props)}catch(r){n={cname:-1,props:new UglifyJS.Dictionary}}return n},exports.writeNameCache=function(e,t,n){if(e){var r;try{r=fs.readFileSync(e,"utf8"),r=JSON.parse(r)}catch(i){r={}}r[t]={cname:n.cname,props:n.props.toObject()},fs.writeFileSync(e,JSON.stringify(r,null,2),"utf8")}};