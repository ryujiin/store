var fs=require("fs"),path=require("path");module.exports=function(e,t){var n={completionKey:"get-yargs-completions"};n.getCompletion=function(i){var s=[],o=process.argv[process.argv.length-1],u=process.argv.slice(process.argv.indexOf("--"+n.completionKey)+1),a=e.parse(u);if(r)return r.length<3?i(r(o,a)):r(o,a,function(e){i(e)});o.match(/^-/)||t.getCommands().forEach(function(e){s.push(e[0])}),o.match(/^-/)&&Object.keys(e.getOptions().key).forEach(function(e){s.push("--"+e)}),i(s)},n.generateCompletionScript=function(e){var t=fs.readFileSync(path.resolve(__dirname,"../completion.sh.hbs"),"utf-8"),n=path.basename(e);return e.match(/\.js$/)&&(e="./"+e),t=t.replace(/{{app_name}}/g,n),t.replace(/{{app_path}}/g,e)};var r=null;return n.registerFunction=function(e){r=e},n};