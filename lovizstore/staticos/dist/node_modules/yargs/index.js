function Argv(e,t){function d(e){var t=Parser(e,o),u=t.argv,d=t.aliases;return u.$0=n.$0,n.parsed=t,p&&~u._.indexOf(p)&&(n.showCompletionScript(),c&&process.exit(0)),Object.keys(u).forEach(function(e){if(e===l)n.showHelp("log"),c&&process.exit(0);else if(e===f)i.showVersion(),c&&process.exit(0);else if(e===h){r.getCompletion(function(e){(e||[]).forEach(function(e){console.log(e)}),c&&process.exit(0)});return}}),s.nonOptionCount(u),s.missingArgumentValue(u),s.requiredArguments(u),a&&s.unknownArguments(u,d),s.customChecks(u,d),s.implications(u),v(u),u}function v(e){Object.keys(o.key).forEach(function(t){typeof e[t]=="undefined"&&(e[t]=undefined)})}e=e||[];var n={},r=null,i=null,s=null;t||(t=process.cwd()),n.$0=process.argv.slice(0,2).map(function(e){if(~e.indexOf("node"))return;var n=rebase(t,e);return e.match(/^\//)&&n.length<e.length?n:e}).join(" ").trim(),process.env._!=undefined&&process.argv[1]==process.env._&&(n.$0=process.env._.replace(path.dirname(process.execPath)+"/",""));var o;n.resetOptions=n.reset=function(){return o={array:[],"boolean":[],string:[],narg:{},key:{},alias:{},"default":{},defaultDescription:{},requiresArg:[],count:[],normalize:[],config:[]},i=Usage(n),s=Validation(n,i),r=Completion(n,i),u={},c=!0,a=!1,l=null,f=null,h=null,n},n.resetOptions(),n.boolean=function(e){return o.boolean.push.apply(o.boolean,[].concat(e)),n},n.array=function(e){return o.array.push.apply(o.array,[].concat(e)),n},n.nargs=function(e,t){return typeof e=="object"?Object.keys(e).forEach(function(t){n.nargs(t,e[t])}):o.narg[e]=t,n},n.normalize=function(e){return o.normalize.push.apply(o.normalize,[].concat(e)),n},n.config=function(e){return o.config.push.apply(o.config,[].concat(e)),n},n.example=function(e,t){return i.example(e,t),n},n.command=function(e,t){return i.command(e,t),n},n.string=function(e){return o.string.push.apply(o.string,[].concat(e)),n},n.default=function(e,t,r){return typeof e=="object"?Object.keys(e).forEach(function(t){n.default(t,e[t])}):(o.defaultDescription[e]=r,o.default[e]=t),n},n.alias=function(e,t){return typeof e=="object"?Object.keys(e).forEach(function(t){n.alias(t,e[t])}):o.alias[e]=(o.alias[e]||[]).concat(t),n},n.count=function(e){return o.count.push.apply(o.count,[].concat(e)),n};var u={};n.demand=n.required=n.require=function(e,t){if(typeof e=="number")u._||(u._={count:0,msg:null}),u._.count+=e,u._.msg=t;else if(Array.isArray(e))e.forEach(function(e){n.demand(e,t)});else if(typeof t=="string")u[e]={msg:t};else if(t===!0||typeof t=="undefined")u[e]={msg:null};return n},n.getDemanded=function(){return u},n.requiresArg=function(e){return o.requiresArg.push.apply(o.requiresArg,[].concat(e)),n},n.implies=function(e,t){return s.implies(e,t),n},n.usage=function(e,t){return!t&&typeof e=="object"&&(t=e,e=null),i.usage(e),t&&n.options(t),n},n.epilogue=n.epilog=function(e){return i.epilog(e),n},n.fail=function(e){return i.failFn(e),n},n.check=function(e){return s.check(e),n},n.defaults=n.default,n.describe=function(e,t){return i.describe(e,t),n},n.parse=function(e){return d(e)},n.option=n.options=function(e,t){if(typeof e=="object")Object.keys(e).forEach(function(t){n.options(t,e[t])});else{assert(typeof t=="object","second argument to option must be an object"),o.key[e]=!0,t.alias&&n.alias(e,t.alias);var r=t.demand||t.required||t.require;r&&n.demand(e,r),"default"in t&&n.default(e,t.default),"nargs"in t&&n.nargs(e,t.nargs);if(t.boolean||t.type==="boolean")n.boolean(e),t.alias&&n.boolean(t.alias);if(t.array||t.type==="array")n.array(e),t.alias&&n.array(t.alias);if(t.string||t.type==="string")n.string(e),t.alias&&n.string(t.alias);(t.count||t.type==="count")&&n.count(e);var i=t.describe||t.description||t.desc;i&&n.describe(e,i),t.requiresArg&&n.requiresArg(e)}return n},n.getOptions=function(){return o},n.wrap=function(e){return i.wrap(e),n};var a=!1;n.strict=function(){return a=!0,n},n.getStrict=function(){return a},n.showHelp=function(e){return i.showHelp(e),n};var f=null;n.version=function(e,t,r){return f=t||"version",i.version(e),n.describe(f,r||"Show version number"),n};var l=null;n.addHelpOpt=function(e,t){return l=e,n.describe(e,t||"Show help"),n},n.showHelpOnFail=function(e,t){return i.showHelpOnFail(e,t),n};var c=!0;n.exitProcess=function(e){return typeof e!="boolean"&&(e=!0),c=e,n},n.getExitProcess=function(){return c},n.help=function(){return arguments.length>0?n.addHelpOpt.apply(n,arguments):(n.parsed||d(e),i.help())};var h=null,p=null;return n.completion=function(e,t,i){return typeof t=="function"&&(i=t,t=null),p=e,h=r.completionKey,n.command(p,t||"generate bash completion script"),i&&r.registerFunction(i),n},n.showCompletionScript=function(e){return e=e||n.$0,console.log(r.generateCompletionScript(e)),n},n.getUsageInstance=function(){return i},n.getValidationInstance=function(){return s},Object.defineProperty(n,"argv",{get:function(){var t=null;try{t=d(e)}catch(n){i.fail(n.message)}return t},enumerable:!0}),sigletonify(n),n}function rebase(e,t){return path.relative(e,t)}function sigletonify(e){Object.keys(e).forEach(function(t){t==="argv"?Argv.__defineGetter__(t,e.__lookupGetter__(t)):Argv[t]=typeof e[t]=="function"?e[t].bind(e):e[t]})}var assert=require("assert"),path=require("path"),Completion=require("./lib/completion"),Parser=require("./lib/parser"),Usage=require("./lib/usage"),Validation=require("./lib/validation");Argv(process.argv.slice(2));var exports=module.exports=Argv;exports.rebase=rebase;