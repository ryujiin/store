/*
 * jQuery Storage API Plugin
 *
 * Copyright (c) 2013 Julien Maurel
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 * https://github.com/julien-maurel/jQuery-Storage-API
 *
 * Version: 1.9.4
 */

!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(){var t,n,r,i=this._type,s=arguments.length,o=window[i],u=arguments,a=u[0];if(1>s)throw new Error("Minimum 1 argument must be given");if(e.isArray(a)){n={};for(var f in a){t=a[f];try{n[t]=JSON.parse(o.getItem(t))}catch(l){n[t]=o.getItem(t)}}return n}if(1!=s){try{n=JSON.parse(o.getItem(a))}catch(l){throw new ReferenceError(a+" is not defined in this storage")}for(var f=1;s-1>f;f++)if(n=n[u[f]],void 0===n)throw new ReferenceError([].slice.call(u,1,f+1).join(".")+" is not defined in this storage");if(e.isArray(u[f])){r=n,n={};for(var c in u[f])n[u[f][c]]=r[u[f][c]];return n}return n[u[f]]}try{return JSON.parse(o.getItem(a))}catch(l){return o.getItem(a)}}function n(){var t,n,r,i=this._type,s=arguments.length,o=window[i],u=arguments,a=u[0],f=u[1],l=isNaN(f)?{}:[];if(1>s||!e.isPlainObject(a)&&2>s)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(e.isPlainObject(a)){for(var c in a)t=a[c],e.isPlainObject(t)||this.alwaysUseJson?o.setItem(c,JSON.stringify(t)):o.setItem(c,t);return a}if(2==s)return"object"==typeof f||this.alwaysUseJson?o.setItem(a,JSON.stringify(f)):o.setItem(a,f),f;try{r=o.getItem(a),null!=r&&(l=JSON.parse(r))}catch(h){}r=l;for(var c=1;s-2>c;c++)t=u[c],n=isNaN(u[c+1])?"object":"array",(!r[t]||"object"==n&&!e.isPlainObject(r[t])||"array"==n&&!e.isArray(r[t]))&&("array"==n?r[t]=[]:r[t]={}),r=r[t];return r[u[c]]=u[c+1],o.setItem(a,JSON.stringify(l)),l}function r(){var t,n,r=this._type,i=arguments.length,s=window[r],o=arguments,u=o[0];if(1>i)throw new Error("Minimum 1 argument must be given");if(e.isArray(u)){for(var a in u)s.removeItem(u[a]);return!0}if(1==i)return s.removeItem(u),!0;try{t=n=JSON.parse(s.getItem(u))}catch(f){throw new ReferenceError(u+" is not defined in this storage")}for(var a=1;i-1>a;a++)if(n=n[o[a]],void 0===n)throw new ReferenceError([].slice.call(o,1,a).join(".")+" is not defined in this storage");if(e.isArray(o[a]))for(var l in o[a])delete n[o[a][l]];else delete n[o[a]];return s.setItem(u,JSON.stringify(t)),!0}function i(t){var n=u.call(this);for(var i in n)r.call(this,n[i]);if(t)for(var i in e.namespaceStorages)a(i)}function s(){var n=arguments.length,r=arguments,i=r[0];if(0==n)return 0==u.call(this).length;if(e.isArray(i)){for(var o=0;o<i.length;o++)if(!s.call(this,i[o]))return!1;return!0}try{var a=t.apply(this,arguments);e.isArray(r[n-1])||(a={totest:a});for(var o in a)if(!(e.isPlainObject(a[o])&&e.isEmptyObject(a[o])||e.isArray(a[o])&&!a[o].length)&&a[o])return!1;return!0}catch(f){return!0}}function o(){var n=arguments.length,r=arguments,i=r[0];if(1>n)throw new Error("Minimum 1 argument must be given");if(e.isArray(i)){for(var s=0;s<i.length;s++)if(!o.call(this,i[s]))return!1;return!0}try{var u=t.apply(this,arguments);e.isArray(r[n-1])||(u={totest:u});for(var s in u)if(void 0===u[s]||null===u[s])return!1;return!0}catch(a){return!1}}function u(){var e=this._type,n=arguments.length,r=window[e],i=arguments,s=[],o={};if(o=n>0?t.apply(this,i):r,o&&o._cookie)for(var u in Cookies.get())""!=u&&s.push(u.replace(o._prefix,""));else for(var a in o)o.hasOwnProperty(a)&&s.push(a);return s}function a(t){if(!t||"string"!=typeof t)throw new Error("First parameter must be a string");h?(window.localStorage.getItem(t)||window.localStorage.setItem(t,"{}"),window.sessionStorage.getItem(t)||window.sessionStorage.setItem(t,"{}")):(window.localCookieStorage.getItem(t)||window.localCookieStorage.setItem(t,"{}"),window.sessionCookieStorage.getItem(t)||window.sessionCookieStorage.setItem(t,"{}"));var n={localStorage:e.extend({},e.localStorage,{_ns:t}),sessionStorage:e.extend({},e.sessionStorage,{_ns:t})};return"undefined"!=typeof Cookies&&(window.cookieStorage.getItem(t)||window.cookieStorage.setItem(t,"{}"),n.cookieStorage=e.extend({},e.cookieStorage,{_ns:t})),e.namespaceStorages[t]=n,n}function f(e){var t="jsapi";try{return window[e]?(window[e].setItem(t,t),window[e].removeItem(t),!0):!1}catch(n){return!1}}var l="ls_",c="ss_",h=f("localStorage"),p={_type:"",_ns:"",_callMethod:function(e,t){var n=[],t=Array.prototype.slice.call(t),r=t[0];return this._ns&&n.push(this._ns),"string"==typeof r&&-1!==r.indexOf(".")&&(t.shift(),[].unshift.apply(t,r.split("."))),[].push.apply(n,t),e.apply(this,n)},alwaysUseJson:!1,get:function(){return this._callMethod(t,arguments)},set:function(){var t=arguments.length,r=arguments,i=r[0];if(1>t||!e.isPlainObject(i)&&2>t)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(e.isPlainObject(i)&&this._ns){for(var s in i)this._callMethod(n,[s,i[s]]);return i}var o=this._callMethod(n,r);return this._ns?o[i.split(".")[0]]:o},remove:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(r,arguments)},removeAll:function(e){return this._ns?(this._callMethod(n,[{}]),!0):this._callMethod(i,[e])},isEmpty:function(){return this._callMethod(s,arguments)},isSet:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return this._callMethod(o,arguments)},keys:function(){return this._callMethod(u,arguments)}};if("undefined"!=typeof Cookies){window.name||(window.name=Math.floor(1e8*Math.random()));var d={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(e,t){Cookies.set(this._prefix+e,t,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(e){return Cookies.get(this._prefix+e)},removeItem:function(e){return Cookies.remove(this._prefix+e,{path:this._path})},clear:function(){for(var e in Cookies.get())""!=e&&(!this._prefix&&-1===e.indexOf(l)&&-1===e.indexOf(c)||this._prefix&&0===e.indexOf(this._prefix))&&Cookies.remove(e)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};h||(window.localCookieStorage=e.extend({},d,{_prefix:l,_expires:3650}),window.sessionCookieStorage=e.extend({},d,{_prefix:c+window.name+"_"})),window.cookieStorage=e.extend({},d),e.cookieStorage=e.extend({},p,{_type:"cookieStorage",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}e.initNamespaceStorage=function(e){return a(e)},h?(e.localStorage=e.extend({},p,{_type:"localStorage"}),e.sessionStorage=e.extend({},p,{_type:"sessionStorage"})):(e.localStorage=e.extend({},p,{_type:"localCookieStorage"}),e.sessionStorage=e.extend({},p,{_type:"sessionCookieStorage"})),e.namespaceStorages={},e.removeAllStorages=function(t){e.localStorage.removeAll(t),e.sessionStorage.removeAll(t),e.cookieStorage&&e.cookieStorage.removeAll(t),t||(e.namespaceStorages={})},e.alwaysUseJsonInStorage=function(t){p.alwaysUseJson=t,e.localStorage.alwaysUseJson=t,e.sessionStorage.alwaysUseJson=t,e.cookieStorage&&(e.cookieStorage.alwaysUseJson=t)}});