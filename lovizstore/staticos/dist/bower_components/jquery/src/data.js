define(["./core","./core/access","./data/var/dataPriv","./data/var/dataUser"],function(e,t,n,r){function o(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:i.test(e)?JSON.parse(e):e}function u(e,t,n){var i;if(n===undefined&&e.nodeType===1){i="data-"+t.replace(s,"-$&").toLowerCase(),n=e.getAttribute(i);if(typeof n=="string"){try{n=o(n)}catch(u){}r.set(e,t,n)}else n=undefined}return n}var i=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,s=/[A-Z]/g;return e.extend({hasData:function(e){return r.hasData(e)||n.hasData(e)},data:function(e,t,n){return r.access(e,t,n)},removeData:function(e,t){r.remove(e,t)},_data:function(e,t,r){return n.access(e,t,r)},_removeData:function(e,t){n.remove(e,t)}}),e.fn.extend({data:function(i,s){var o,a,f,l=this[0],c=l&&l.attributes;if(i===undefined){if(this.length){f=r.get(l);if(l.nodeType===1&&!n.get(l,"hasDataAttrs")){o=c.length;while(o--)c[o]&&(a=c[o].name,a.indexOf("data-")===0&&(a=e.camelCase(a.slice(5)),u(l,a,f[a])));n.set(l,"hasDataAttrs",!0)}}return f}return typeof i=="object"?this.each(function(){r.set(this,i)}):t(this,function(e){var t;if(l&&e===undefined){t=r.get(l,i);if(t!==undefined)return t;t=u(l,i);if(t!==undefined)return t;return}this.each(function(){r.set(this,i,e)})},null,s,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){r.remove(this,e)})}}),e});