define(["./core","./var/document","./var/documentElement","./var/rnothtmlwhite","./var/slice","./data/var/dataPriv","./core/init","./selector"],function(e,t,n,r,i,s){function f(){return!0}function l(){return!1}function c(){try{return t.activeElement}catch(e){}}function h(t,n,r,i,s,o){var u,a;if(typeof n=="object"){typeof r!="string"&&(i=i||r,r=undefined);for(a in n)h(t,a,r,i,n[a],o);return t}i==null&&s==null?(s=r,i=r=undefined):s==null&&(typeof r=="string"?(s=i,i=undefined):(s=i,i=r,r=undefined));if(s===!1)s=l;else if(!s)return t;return o===1&&(u=s,s=function(t){return e().off(t),u.apply(this,arguments)},s.guid=u.guid||(u.guid=e.guid++)),t.each(function(){e.event.add(this,n,s,i,r)})}var o=/^key/,u=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,a=/^([^.]*)(?:\.(.+)|)/;return e.event={global:{},add:function(t,i,o,u,f){var l,c,h,p,d,v,m,g,y,b,w,E=s.get(t);if(!E)return;o.handler&&(l=o,o=l.handler,f=l.selector),f&&e.find.matchesSelector(n,f),o.guid||(o.guid=e.guid++),(p=E.events)||(p=E.events={}),(c=E.handle)||(c=E.handle=function(n){return typeof e!="undefined"&&e.event.triggered!==n.type?e.event.dispatch.apply(t,arguments):undefined}),i=(i||"").match(r)||[""],d=i.length;while(d--){h=a.exec(i[d])||[],y=w=h[1],b=(h[2]||"").split(".").sort();if(!y)continue;m=e.event.special[y]||{},y=(f?m.delegateType:m.bindType)||y,m=e.event.special[y]||{},v=e.extend({type:y,origType:w,data:u,handler:o,guid:o.guid,selector:f,needsContext:f&&e.expr.match.needsContext.test(f),namespace:b.join(".")},l),(g=p[y])||(g=p[y]=[],g.delegateCount=0,(!m.setup||m.setup.call(t,u,b,c)===!1)&&t.addEventListener&&t.addEventListener(y,c)),m.add&&(m.add.call(t,v),v.handler.guid||(v.handler.guid=o.guid)),f?g.splice(g.delegateCount++,0,v):g.push(v),e.event.global[y]=!0}},remove:function(t,n,i,o,u){var f,l,c,h,p,d,v,m,g,y,b,w=s.hasData(t)&&s.get(t);if(!w||!(h=w.events))return;n=(n||"").match(r)||[""],p=n.length;while(p--){c=a.exec(n[p])||[],g=b=c[1],y=(c[2]||"").split(".").sort();if(!g){for(g in h)e.event.remove(t,g+n[p],i,o,!0);continue}v=e.event.special[g]||{},g=(o?v.delegateType:v.bindType)||g,m=h[g]||[],c=c[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=f=m.length;while(f--)d=m[f],(u||b===d.origType)&&(!i||i.guid===d.guid)&&(!c||c.test(d.namespace))&&(!o||o===d.selector||o==="**"&&d.selector)&&(m.splice(f,1),d.selector&&m.delegateCount--,v.remove&&v.remove.call(t,d));l&&!m.length&&((!v.teardown||v.teardown.call(t,y,w.handle)===!1)&&e.removeEvent(t,g,w.handle),delete h[g])}e.isEmptyObject(h)&&s.remove(t,"handle events")},dispatch:function(t){var n=e.event.fix(t),r,i,o,u,a,f,l=new Array(arguments.length),c=(s.get(this,"events")||{})[n.type]||[],h=e.event.special[n.type]||{};l[0]=n;for(r=1;r<arguments.length;r++)l[r]=arguments[r];n.delegateTarget=this;if(h.preDispatch&&h.preDispatch.call(this,n)===!1)return;f=e.event.handlers.call(this,n,c),r=0;while((u=f[r++])&&!n.isPropagationStopped()){n.currentTarget=u.elem,i=0;while((a=u.handlers[i++])&&!n.isImmediatePropagationStopped())if(!n.rnamespace||n.rnamespace.test(a.namespace))n.handleObj=a,n.data=a.data,o=((e.event.special[a.origType]||{}).handle||a.handler).apply(u.elem,l),o!==undefined&&(n.result=o)===!1&&(n.preventDefault(),n.stopPropagation())}return h.postDispatch&&h.postDispatch.call(this,n),n.result},handlers:function(t,n){var r,i,s,o,u,a=[],f=n.delegateCount,l=t.target;if(f&&l.nodeType&&!(t.type==="click"&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(l.nodeType===1&&(t.type!=="click"||l.disabled!==!0)){o=[],u={};for(r=0;r<f;r++)i=n[r],s=i.selector+" ",u[s]===undefined&&(u[s]=i.needsContext?e(s,this).index(l)>-1:e.find(s,this,null,[l]).length),u[s]&&o.push(i);o.length&&a.push({elem:l,handlers:o})}return l=this,f<n.length&&a.push({elem:l,handlers:n.slice(f)}),a},addProp:function(t,n){Object.defineProperty(e.Event.prototype,t,{enumerable:!0,configurable:!0,get:e.isFunction(n)?function(){if(this.originalEvent)return n(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[e.expando]?t:new e.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==c()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===c()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&e.nodeName(this,"input"))return this.click(),!1},_default:function(t){return e.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},e.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},e.Event=function(t,n){if(!(this instanceof e.Event))return new e.Event(t,n);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&t.returnValue===!1?f:l,this.target=t.target&&t.target.nodeType===3?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,n&&e.extend(this,n),this.timeStamp=t&&t.timeStamp||e.now(),this[e.expando]=!0},e.Event.prototype={constructor:e.Event,isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},e.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return e.which==null&&o.test(e.type)?e.charCode!=null?e.charCode:e.keyCode:!e.which&&t!==undefined&&u.test(e.type)?t&1?1:t&2?3:t&4?2:0:e.which}},e.event.addProp),e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var r,i=this,s=t.relatedTarget,o=t.handleObj;if(!s||s!==i&&!e.contains(i,s))t.type=o.origType,r=o.handler.apply(this,arguments),t.type=n;return r}}}),e.fn.extend({on:function(e,t,n,r){return h(this,e,t,n,r)},one:function(e,t,n,r){return h(this,e,t,n,r,1)},off:function(t,n,r){var i,s;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,e(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof t=="object"){for(s in t)this.off(s,n,t[s]);return this}if(n===!1||typeof n=="function")r=n,n=undefined;return r===!1&&(r=l),this.each(function(){e.event.remove(this,t,r,n)})}}),e});