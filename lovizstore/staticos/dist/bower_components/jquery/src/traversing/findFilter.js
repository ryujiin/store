define(["../core","../var/indexOf","./var/rneedsContext","../selector"],function(e,t,n){function i(n,i,s){return e.isFunction(i)?e.grep(n,function(e,t){return!!i.call(e,t,e)!==s}):i.nodeType?e.grep(n,function(e){return e===i!==s}):typeof i!="string"?e.grep(n,function(e){return t.call(i,e)>-1!==s}):r.test(i)?e.filter(i,n,s):(i=e.filter(i,n),e.grep(n,function(e){return t.call(i,e)>-1!==s&&e.nodeType===1}))}var r=/^.[^:#\[\.,]*$/;e.filter=function(t,n,r){var i=n[0];return r&&(t=":not("+t+")"),n.length===1&&i.nodeType===1?e.find.matchesSelector(i,t)?[i]:[]:e.find.matches(t,e.grep(n,function(e){return e.nodeType===1}))},e.fn.extend({find:function(t){var n,r,i=this.length,s=this;if(typeof t!="string")return this.pushStack(e(t).filter(function(){for(n=0;n<i;n++)if(e.contains(s[n],this))return!0}));r=this.pushStack([]);for(n=0;n<i;n++)e.find(t,s[n],r);return i>1?e.uniqueSort(r):r},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(t){return!!i(this,typeof t=="string"&&n.test(t)?e(t):t||[],!1).length}})});