define(["../core","./var/rtagName","./var/rscriptType","./wrapMap","./getAll","./setGlobalEval"],function(e,t,n,r,i,s){function u(u,a,f,l,c){var h,p,d,v,m,g,y=a.createDocumentFragment(),b=[],w=0,E=u.length;for(;w<E;w++){h=u[w];if(h||h===0)if(e.type(h)==="object")e.merge(b,h.nodeType?[h]:h);else if(!o.test(h))b.push(a.createTextNode(h));else{p=p||y.appendChild(a.createElement("div")),d=(t.exec(h)||["",""])[1].toLowerCase(),v=r[d]||r._default,p.innerHTML=v[1]+e.htmlPrefilter(h)+v[2],g=v[0];while(g--)p=p.lastChild;e.merge(b,p.childNodes),p=y.firstChild,p.textContent=""}}y.textContent="",w=0;while(h=b[w++]){if(l&&e.inArray(h,l)>-1){c&&c.push(h);continue}m=e.contains(h.ownerDocument,h),p=i(y.appendChild(h),"script"),m&&s(p);if(f){g=0;while(h=p[g++])n.test(h.type||"")&&f.push(h)}}return y}var o=/<|&#?\w+;/;return u});