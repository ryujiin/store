define(["../core","../core/stripAndCollapse","./support","../core/init"],function(e,t,n){var r=/\r/g;e.fn.extend({val:function(t){var n,i,s,o=this[0];if(!arguments.length){if(o)return n=e.valHooks[o.type]||e.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==undefined?i:(i=o.value,typeof i=="string"?i.replace(r,""):i==null?"":i);return}return s=e.isFunction(t),this.each(function(r){var i;if(this.nodeType!==1)return;s?i=t.call(this,r,e(this).val()):i=t,i==null?i="":typeof i=="number"?i+="":e.isArray(i)&&(i=e.map(i,function(e){return e==null?"":e+""})),n=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,i,"value")===undefined)this.value=i})}}),e.extend({valHooks:{option:{get:function(n){var r=e.find.attr(n,"value");return r!=null?r:t(e.text(n))}},select:{get:function(t){var n,r,i,s=t.options,o=t.selectedIndex,u=t.type==="select-one",a=u?null:[],f=u?o+1:s.length;o<0?i=f:i=u?o:0;for(;i<f;i++){r=s[i];if((r.selected||i===o)&&!r.disabled&&(!r.parentNode.disabled||!e.nodeName(r.parentNode,"optgroup"))){n=e(r).val();if(u)return n;a.push(n)}}return a},set:function(t,n){var r,i,s=t.options,o=e.makeArray(n),u=s.length;while(u--){i=s[u];if(i.selected=e.inArray(e.valHooks.option.get(i),o)>-1)r=!0}return r||(t.selectedIndex=-1),o}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){if(e.isArray(n))return t.checked=e.inArray(e(t).val(),n)>-1}},n.checkOn||(e.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})})});